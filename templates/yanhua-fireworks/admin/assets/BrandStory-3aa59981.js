import{a as f}from"./about-us-7d0e57cd.js";import{b as B,r as l,x as V,e as n,y as k,o as u,f as S,z as N,p as v,w as o,g as _,h as s,i as D,t as E,l as T,E as r}from"./index-1dad1f50.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";import"./request-0b13b1fd.js";const U={class:"page-container"},z={class:"card-header"},A={class:"update-time"},I=B({__name:"BrandStory",setup(L){const c=l(!1),d=l(!1),t=l({content:""}),i=l(""),m=async()=>{d.value=!0;try{const e=await f.getContent();e.data&&e.data.code===200&&e.data.data&&(t.value.content=e.data.data.content||"",i.value=e.data.data.updateTime||"")}catch(e){r.error(e.message||"获取内容失败")}finally{d.value=!1}},y=async()=>{if(!t.value.content||!t.value.content.trim()){r.warning("内容不能为空");return}c.value=!0;try{await f.updateContent(t.value.content),r.success("保存成功"),await m()}catch(e){r.error(e.message||"保存失败")}finally{c.value=!1}};return V(()=>{m()}),(e,a)=>{const g=n("el-button"),h=n("el-input"),p=n("el-form-item"),w=n("el-form"),x=n("el-card"),C=k("loading");return u(),S("div",U,[N((u(),v(x,{shadow:"never"},{header:o(()=>[_("div",z,[a[2]||(a[2]=_("span",null,"品牌故事编辑",-1)),s(g,{type:"primary",loading:c.value,onClick:y},{default:o(()=>[...a[1]||(a[1]=[D("保存",-1)])]),_:1},8,["loading"])])]),default:o(()=>[s(w,{model:t.value,"label-width":"100px"},{default:o(()=>[s(p,{label:"内容介绍"},{default:o(()=>[s(h,{modelValue:t.value.content,"onUpdate:modelValue":a[0]||(a[0]=b=>t.value.content=b),type:"textarea",rows:15,placeholder:"请输入品牌介绍内容",maxlength:"5000","show-word-limit":""},null,8,["modelValue"])]),_:1}),i.value?(u(),v(p,{key:0,label:"更新时间"},{default:o(()=>[_("span",A,E(i.value),1)]),_:1})):T("",!0)]),_:1},8,["model"])]),_:1})),[[C,d.value]])])}}});const H=M(I,[["__scopeId","data-v-c64eaa4f"]]);export{H as default};
