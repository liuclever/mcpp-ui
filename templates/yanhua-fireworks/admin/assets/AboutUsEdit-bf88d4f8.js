import{a as v}from"./about-us-7d0e57cd.js";import{b as E,r,x as U,e as l,y as A,o as m,f as B,z as N,p as g,w as a,g as p,h as n,t as D,l as T,i as y,E as s}from"./index-1dad1f50.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";import"./request-0b13b1fd.js";const S={class:"page-container"},z={class:"update-time"},I=E({__name:"AboutUsEdit",setup(L){const d=r(!1),c=r(!1),o=r({content:""}),i=r(""),u=async()=>{c.value=!0;try{const e=await v.getContent();e.data.code===200&&e.data.data?(o.value.content=e.data.data.content,i.value=e.data.data.updateTime):s.error(e.data.message||"获取内容失败")}catch(e){s.error(e.message||"获取内容失败")}finally{c.value=!1}},w=async()=>{if(!o.value.content||!o.value.content.trim()){s.warning("内容不能为空");return}d.value=!0;try{const e=await v.updateContent(o.value.content);e.data.code===200?(s.success("保存成功"),await u()):s.error(e.data.message||"保存失败")}catch(e){s.error(e.message||"保存失败")}finally{d.value=!1}},h=()=>{u()};return U(()=>{u()}),(e,t)=>{const b=l("el-input"),_=l("el-form-item"),f=l("el-button"),x=l("el-form"),C=l("el-card"),V=A("loading");return m(),B("div",S,[N((m(),g(C,{shadow:"never"},{header:a(()=>[...t[1]||(t[1]=[p("div",{class:"card-header"},[p("span",null,"关于我们内容管理")],-1)])]),default:a(()=>[n(x,{model:o.value,"label-width":"100px"},{default:a(()=>[n(_,{label:"内容介绍"},{default:a(()=>[n(b,{modelValue:o.value.content,"onUpdate:modelValue":t[0]||(t[0]=k=>o.value.content=k),type:"textarea",rows:15,placeholder:"请输入关于我们的内容",maxlength:"5000","show-word-limit":""},null,8,["modelValue"])]),_:1}),i.value?(m(),g(_,{key:0,label:"更新时间"},{default:a(()=>[p("span",z,D(i.value),1)]),_:1})):T("",!0),n(_,null,{default:a(()=>[n(f,{type:"primary",loading:d.value,onClick:w},{default:a(()=>[...t[2]||(t[2]=[y(" 保存 ",-1)])]),_:1},8,["loading"]),n(f,{onClick:h},{default:a(()=>[...t[3]||(t[3]=[y(" 取消 ",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})),[[V,c.value]])])}}});const H=M(I,[["__scopeId","data-v-ff288da4"]]);export{H as default};
