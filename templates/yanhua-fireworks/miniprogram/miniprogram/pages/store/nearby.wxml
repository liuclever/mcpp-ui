<view class="container">
  <!-- 顶部导航栏 -->
  <nav-bar title="附近网点" showBack="{{true}}"></nav-bar>

  <!-- 顶部搜索 -->
  <view class="search-header">
    <view class="back-btn" bindtap="goBack">
      <image src="/assets/icons/back-arrow.png" class="back-arrow"></image>
    </view>
    <view class="location-info" bindtap="relocate">
      <text class="location-text">{{city || '定位中'}}</text>
      <image src="/assets/icons/location-small.png" class="location-icon"></image>
    </view>
    <view class="search-box">
      <input placeholder="请输入门店名称" bindinput="onSearchInput" value="{{searchKeyword}}" />
      <image src="/assets/icons/search-nearby.png" class="search-icon"></image>
    </view>
  </view>

  <!-- 提示信息 -->
  <view class="tip-bar">
    <text>仅显示最近10家正规网点</text>
  </view>

  <!-- 网点列表 -->
  <view class="store-list" wx:if="{{storeList.length > 0}}">
    <view class="store-card" wx:for="{{storeList}}" wx:key="id">
      <view class="store-header">
        <view class="store-info">
          <text class="store-name">{{item.name}}</text>
          <text class="store-address">{{item.address}}</text>
          <text class="store-phone">{{item.phone}}</text>
        </view>
        <text class="store-distance" wx:if="{{item.distance}}">{{item.distance}}</text>
      </view>
      <view class="store-actions">
        <view class="action-btn call-btn" bindtap="callStore" data-phone="{{item.phone}}">
          <text>拨打电话</text>
        </view>
        <view class="action-btn nav-btn" bindtap="navigateTo" data-store="{{item}}">
          <text>导航</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 空状态 -->
  <view class="empty-state" wx:if="{{!loading && storeList.length === 0}}">
    <image src="/assets/icons/location-loading.png" class="empty-icon"></image>
    <text class="empty-text">{{city ? '附近暂无网点' : '定位中'}}</text>
  </view>

  <!-- 入驻按钮 -->
  <view class="join-btn" bindtap="applyJoin">
    <text>我要入驻</text>
  </view>
</view>
