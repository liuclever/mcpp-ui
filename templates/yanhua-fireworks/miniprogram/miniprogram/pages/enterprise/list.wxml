<!--ä¼ä¸šä¸­å¿ƒå†…å®¹åˆ—è¡¨é¡µ-->
<view class="list-page">
  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading && contentList.length === 0}}" class="loading-container">
    <view class="loading-text">åŠ è½½ä¸­...</view>
  </view>

  <!-- é”™è¯¯çŠ¶æ€ -->
  <view wx:elif="{{error && contentList.length === 0}}" class="error-container">
    <view class="error-text">{{error}}</view>
    <button class="retry-button" bindtap="onRetry">é‡è¯•</button>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:elif="{{!loading && contentList.length === 0}}" class="empty-container">
    <view class="empty-text">æš‚æ— å†…å®¹</view>
  </view>

  <!-- å†…å®¹åˆ—è¡¨ -->
  <view wx:else class="content-list">
    <!-- æ–‡å­—æ ‡é¢˜å½¢å¼ -->
    <block wx:if="{{displayMode === 'text'}}">
      <view 
        class="list-item" 
        wx:for="{{contentList}}" 
        wx:key="id"
        bindtap="onItemTap"
        data-id="{{item.id}}"
      >
        <view class="list-title">{{item.title}}</view>
        <view class="list-summary">{{item.summary}}</view>
        <view class="list-meta">
          <text class="list-views">ğŸ‘ {{item.viewCount || 0}} äººé˜…è¯»</text>
          <text class="list-time">{{item.publishTime || item.createTime}}</text>
        </view>
      </view>
    </block>

    <!-- å›¾æ–‡å½¢å¼ (é»˜è®¤) - ä¸Šæ ‡é¢˜ä¸‹å›¾ç‰‡ -->
    <block wx:elif="{{displayMode === 'image-text' || !displayMode}}">
      <view 
        class="article-item" 
        wx:for="{{contentList}}" 
        wx:key="id"
        bindtap="onItemTap"
        data-id="{{item.id}}"
      >
        <view class="article-title">{{item.title}}</view>
        <!-- åªæœ‰å½“æœ‰å›¾ç‰‡æ—¶æ‰å±•ç¤ºå›¾ç‰‡åŒºåŸŸ -->
        <view class="article-images" wx:if="{{item.images && item.images.length > 0}}">
          <image 
            wx:for="{{item.images}}" 
            wx:for-item="img" 
            wx:for-index="imgIndex"
            wx:key="imgIndex"
            wx:if="{{imgIndex < 3}}"
            class="article-image {{item.images.length === 1 ? 'single' : (item.images.length === 2 ? 'double' : 'triple')}}" 
            src="{{img}}" 
            mode="aspectFill"
          ></image>
        </view>
        <view class="article-meta">
          <text class="article-views">ğŸ‘ {{item.viewCount || 0}} äººé˜…è¯»</text>
        </view>
      </view>
    </block>

    <!-- å›¾ç‰‡åˆ—è¡¨å½¢å¼ - åŒåˆ—å±•ç¤º -->
    <block wx:elif="{{displayMode === 'image-grid'}}">
      <view class="image-grid-list">
        <view 
          class="image-grid-item" 
          wx:for="{{contentList}}" 
          wx:key="id"
          bindtap="onItemTap"
          data-id="{{item.id}}"
        >
          <image class="grid-image" src="{{item.coverImage}}" mode="aspectFill"></image>
          <view class="grid-title">{{item.title}}</view>
          <view class="grid-meta">
            <text class="grid-views">ğŸ‘ {{item.viewCount || 0}} äººé˜…è¯»</text>
          </view>
        </view>
      </view>
    </block>

    <!-- åŠ è½½æ›´å¤šæç¤º -->
    <view class="load-more-container">
      <view wx:if="{{loadingMore}}" class="loading-more">åŠ è½½æ›´å¤š...</view>
      <view wx:elif="{{hasMore}}" class="load-more-tip">ä¸Šæ‹‰åŠ è½½æ›´å¤š</view>
      <view wx:else class="no-more">æ²¡æœ‰æ›´å¤šäº†</view>
    </view>
  </view>
</view>
