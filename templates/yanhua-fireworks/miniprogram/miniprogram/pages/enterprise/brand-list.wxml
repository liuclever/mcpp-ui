<!--å“ç‰Œæ•…äº‹åˆ—è¡¨é¡µ-->
<view class="brand-list-container">
  <!-- åŠ è½½ä¸­çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-container">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- é”™è¯¯çŠ¶æ€ -->
  <view wx:elif="{{error}}" class="error-container">
    <image class="error-icon" src="/images/error.png" mode="aspectFit"></image>
    <text class="error-text">{{error}}</text>
    <button class="retry-button" bindtap="onRetry">é‡æ–°åŠ è½½</button>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:elif="{{brandStories.length === 0}}" class="empty-container">
    <image class="empty-icon" src="/images/empty.png" mode="aspectFit"></image>
    <text class="empty-text">æš‚æ— å“ç‰Œæ•…äº‹</text>
  </view>

  <!-- åˆ—è¡¨å†…å®¹ -->
  <view wx:else class="list-content">
    <!-- æ–‡å­—æ ‡é¢˜å½¢å¼ -->
    <block wx:if="{{displayMode === 'text'}}">
      <view 
        class="story-item" 
        wx:for="{{brandStories}}" 
        wx:key="id"
        bindtap="goToDetail"
        data-id="{{item.id}}"
      >
        <view class="story-title">{{item.title}}</view>
        <view class="story-summary">{{item.summary}}</view>
        <view class="story-meta">
          <text class="story-views">ğŸ‘ {{item.viewCount || 0}} äººé˜…è¯»</text>
          <text class="story-time">{{item.createTime}}</text>
        </view>
      </view>
    </block>

    <!-- å›¾æ–‡å½¢å¼ (é»˜è®¤) - ä¸Šæ ‡é¢˜ä¸‹å›¾ç‰‡ -->
    <block wx:elif="{{displayMode === 'image-text' || !displayMode}}">
      <view 
        class="article-item" 
        wx:for="{{brandStories}}" 
        wx:key="id"
        bindtap="goToDetail"
        data-id="{{item.id}}"
      >
        <view class="article-title">{{item.title}}</view>
        <!-- åªæœ‰å½“æœ‰å›¾ç‰‡æ—¶æ‰å±•ç¤ºå›¾ç‰‡åŒºåŸŸ -->
        <view class="article-images" wx:if="{{item.images && item.images.length > 0}}">
          <image 
            wx:for="{{item.images}}" 
            wx:for-item="img" 
            wx:for-index="imgIndex"
            wx:key="imgIndex"
            wx:if="{{imgIndex < 3}}"
            class="article-image {{item.images.length === 1 ? 'single' : (item.images.length === 2 ? 'double' : 'triple')}}" 
            src="{{img}}" 
            mode="aspectFill"
          ></image>
        </view>
        <view class="article-meta">
          <text class="article-views">ğŸ‘ {{item.viewCount || 0}} äººé˜…è¯»</text>
        </view>
      </view>
    </block>

    <!-- å›¾ç‰‡åˆ—è¡¨å½¢å¼ - åŒåˆ—å±•ç¤º -->
    <block wx:elif="{{displayMode === 'image-grid'}}">
      <view class="image-grid-list">
        <view 
          class="image-grid-item" 
          wx:for="{{brandStories}}" 
          wx:key="id"
          bindtap="goToDetail"
          data-id="{{item.id}}"
        >
          <image class="grid-image" src="{{item.coverImage}}" mode="aspectFill"></image>
          <view class="grid-title">{{item.title}}</view>
          <view class="grid-meta">
            <text class="grid-views">ğŸ‘ {{item.viewCount || 0}} äººé˜…è¯»</text>
          </view>
        </view>
      </view>
    </block>

    <!-- åŠ è½½æ›´å¤šæç¤º -->
    <view wx:if="{{loadingMore}}" class="loading-more">
      <text class="loading-more-text">åŠ è½½ä¸­...</text>
    </view>

    <!-- æ²¡æœ‰æ›´å¤šæç¤º -->
    <view wx:if="{{!hasMore && brandStories.length > 0}}" class="no-more">
      <text class="no-more-text">æ²¡æœ‰æ›´å¤šäº†</text>
    </view>
  </view>
</view>
